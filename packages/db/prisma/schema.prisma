generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User{
  id        String @id @default(uuid())
  email     String @unique
  password  String
  name      String
  photo     String?  
  rooms    Room[]   // every user can have multiple room
  chats    Chat[]   // every chat can have multiple chsts
}

model Room {
  id        Int @id @default(autoincrement())   // this is room id 
  slug      String  @unique   // its just a room name
  createAt  DateTime @default(now())
  adminId   String     // who creted this roo (id of user) admin id is foriegn key to the user table,
  admin     User @relation(fields: [adminId],references: [id])
  chats      Chat[]
}

model Chat {
  id        Int @id @default(autoincrement())
  message   String
  sentAt    DateTime  @default(now())
  roomId    Int   // which room did this specific msg come to
  userId    String   // who sent this msg (id of user) userId is foreign key to the user table.
  // every chat have two relationship , who sent it and in which room.
  room      Room  @relation(fields: [roomId] ,references: [id])
  user      User  @relation(fields: [userId] ,references: [id])
}
